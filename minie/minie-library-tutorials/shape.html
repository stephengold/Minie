<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Choosing collision shapes :: The Minie project</title>
    <link rel="canonical" href="https://stephengold.github.io/Minie/minie/minie-library-tutorials/shape.html">
    <link rel="prev" href="rigidbody.html">
    <link rel="next" href="rbc.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="Choosing collision shapes">
<meta property="og:title" content="The Minie project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/Minie">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Minie project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="minie" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rbc.html">RigidBodyControl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="new6dof.html">New6Dof constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dac.html">Ragdolls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="collision.html">Managing collisions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="server.html">Physics without appstates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc.html">Miscellany</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depends.html">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/Minie">GitHub repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/Minie/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/MinieLibrary/release-notes.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues/new">Report an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library APIs (javadoc)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/master">Master branch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-7">Version 7.7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-6">Version 7.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-5">Version 7.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-4">Version 7.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-2">Version 7.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-1">Version 7.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-0">Version 7.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-2">Version 6.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-1">Version 6.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-0">Version 6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-1">Version 5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-0">Version 5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-9">Version 4.9</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-8">Version 4.8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-7">Version 4.7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-6">Version 4.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-5">Version 4.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-4">Version 4.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-3">Version 4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-2">Version 4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-1">Version 4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-0">Version 4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-1">Version 3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-0">Version 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v2-0">Version 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Minie at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://hub.jmonkeyengine.org/c/user-code-projects/minie/63">JMonkeyEngine forum</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold/Minie">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://library.jmonkeyengine.org/#!entry=11511%2F38308161-c3cf-4e23-8754-528ca8387c11">JMonkeyEngine Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/Minie">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Minie</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://www.indiedb.com/games/the-afflicted-forests">The Afflicted Forests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/rvandoosselaer/Blocks">Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://play.google.com/store/apps/details?id=com.tharg.boxer">Boxer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Garrett">Garrett</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://store.steampowered.com/app/2244540/Marvelous_Marbles">Marvelous Marbles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Maud">Maud editor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jme-vehicles">More Advanced Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://myworldvw.com">MyWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/tlf30/PhysicsSync">PhysicsSync</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://scenemax3d.com">SceneMax3D</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Acorus">Acorus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://pybullet.org/wordpress">Bullet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Heart">Heart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jmonkeyengine.org">JMonkeyEngine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Libbulletjme">Libbulletjme</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie-site-it">Minie-site-it</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/Simsilica/SimMath">SimMath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Minie project</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Minie project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../overview.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../overview.html">The Minie project</a></li>
    <li>Library tutorials</li>
    <li><a href="shape.html">Collision shapes</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/Minie/edit/master/MinieLibrary/src/site/antora/tutorials/modules/minie-library-tutorials/pages/shape.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Choosing collision shapes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A <em>collision shape</em>
describes the shape and size of a collision object such as a rigid body.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_17_shape_classes"><a class="anchor" href="#_the_17_shape_classes"></a>The 17 shape classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The examples so far have all used spheres, cubes, and/or cylinders.
However, those are only 3 of the 17 concrete subclasses of
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CollisionShape.html"><code>CollisionShape</code></a>.</p>
</div>
<div class="paragraph">
<p>The subclasses are summarized here, in lexicographic order,
with illustrations and lists of key properties (explained below):</p>
</div>
<table class="tableblock frame-all grid-none stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/Box2dShape.html"><code>Box2dShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/box2d.png" alt="box2d" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/BoxCollisionShape.html"><code>BoxCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/box.png" alt="box" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CapsuleCollisionShape.html"><code>CapsuleCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; zero margin<br>
&rarr; precise<br>
&rarr; uniform scaling only<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/capsule.png" alt="capsule" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CompoundCollisionShape.html"><code>CompoundCollisionShape</code></a></p>
<p class="tableblock">&rarr; neither concave nor convex<br>
&rarr; positive margin<br>
&rarr; precise if-and-only-if all of its children are precise<br>
&rarr; scalable to the extent that all of its children are scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/compound.png" alt="compound" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/ConeCollisionShape.html"><code>ConeCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; imprecise<br>
&rarr; uniform scaling only<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cone.png" alt="cone" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/Convex2dShape.html"><code>Convex2dShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; imprecise<br>
&rarr; scalable to the extent that its base shape is scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/convex2d.png" alt="convex2d" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CylinderCollisionShape.html"><code>CylinderCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; imprecise<br>
&rarr; limited scalability<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/cylinder.png" alt="cylinder" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/EmptyShape.html"><code>EmptyShape</code></a></p>
<p class="tableblock">&rarr; concave<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable, but why bother?<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no image)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/GImpactCollisionShape.html"><code>GImpactCollisionShape</code></a></p>
<p class="tableblock">&rarr; concave<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/gimpact.png" alt="gimpact" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HeightfieldCollisionShape.html"><code>HeightfieldCollisionShape</code></a></p>
<p class="tableblock">&rarr; concave<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/heightfield.png" alt="heightfield" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HullCollisionShape.html"><code>HullCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; imprecise<br>
&rarr; fully scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/hull.png" alt="hull" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MeshCollisionShape.html"><code>MeshCollisionShape</code></a></p>
<p class="tableblock">&rarr; concave<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/mesh.png" alt="mesh" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MinkowskiSum.html"><code>MinkowskiSum</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; margin determined by base shapes<br>
&rarr; not scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/minkowski.png" alt="minkowski" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MultiSphere.html"><code>MultiSphere</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/multiSphere.png" alt="multiSphere" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/PlaneCollisionShape.html"><code>PlaneCollisionShape</code></a></p>
<p class="tableblock">&rarr; concave and infinite<br>
&rarr; positive margin<br>
&rarr; precise<br>
&rarr; fully scalable, but why bother?<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/plane.png" alt="plane" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SimplexCollisionShape.html"><code>SimplexCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; positive margin<br>
&rarr; imprecise<br>
&rarr; not scalable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/simplex.png" alt="simplex" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17. <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SphereCollisionShape.html"><code>SphereCollisionShape</code></a></p>
<p class="tableblock">&rarr; convex<br>
&rarr; zero margin<br>
&rarr; precise<br>
&rarr; uniform scaling only<br>
&rarr; symmetric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/sphere.png" alt="sphere" height="160"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CompoundCollisionShape.html"><code>CompoundCollisionShape</code></a>
class is especially important because
it enables any number of <em>child shapes</em>
to be combined into a single <em>compound shape</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to limitations of Bullet, collisions between <code>HeightfieldCollisionShape</code>,
<code>MeshCollisionShape</code>, and <code>PlaneCollisionShape</code> objects are never detected.
However, such objects <strong>will</strong> collide with objects
having compound or convex shapes.</p>
</div>
<div class="paragraph">
<p>Similarly, collisions between <code>GImpactCollisionShape</code> and <code>PlaneCollisionShape</code>
objects are never detected.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_convex_versus_concave"><a class="anchor" href="#_convex_versus_concave"></a>Convex versus concave</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>convex</em> collision-shape classes are those
that guarantee the <em>convex property</em>:
for any 2 locations inside a shape,
the line segment connecting those locations lies entirely inside the shape.</p>
</div>
<div class="paragraph">
<p>Here are 2 equivalent ways to test whether a shape belongs to a convex class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">boolean convexClass = (shape instanceof ConvexShape);
boolean isConvex = shape.isConvex();
assert convexClass == isConvex;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this context, "convex" is a property of classes, not instances.
While specific <strong>instances</strong> of non-convex classes have the convex property,
those classes don&#8217;t guarantee it for <strong>all</strong> instances.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Concave</em> is essentially the opposite of convex, except that compound shapes
are regarded as neither convex nor concave.
No shape is both convex <strong>and</strong> concave.
To test whether a shape belongs to a concave class, use <code>shape.isConcave()</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_margin"><a class="anchor" href="#_margin"></a>Margin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All collision-shape subtypes except
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CapsuleCollisionShape.html"><code>CapsuleCollisionShape</code></a>
and
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SphereCollisionShape.html"><code>SphereCollisionShape</code></a>
incorporate a <em>margin</em>, a narrow zone near the surface of the shape.
(The word <em>margin</em> refers to both the zone and its thickness.)
According to
<a href="https://github.com/bulletphysics/bullet3/blob/master/docs/Bullet_User_Manual.pdf">the Bullet User Manual</a>,
the purpose of margin is
"to improve performance and reliability of the collision detection."</p>
</div>
<div class="paragraph">
<p>For shapes with positive margin, the default thickness is 0.04 physics-space units.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While methods are provided to alter margins (and the default margin),
doing so is not recommended.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_precise_versus_imprecise"><a class="anchor" href="#_precise_versus_imprecise"></a>Precise versus imprecise</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>precise shape</em> is a collision shape whose <em>effective shape</em>
(observed in collisions, contact tests, ray tests, and sweep tests)
is unaffected by margin.</p>
</div>
<div class="paragraph">
<p>While most collision-shape subtypes are precise, 5 of them are not.
For 4 of them, margin simply expands their effective shapes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/ConeCollisionShape.html"><code>ConeCollisionShape</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/Convex2dShape.html"><code>Convex2dShape</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HullCollisionShape.html"><code>HullCollisionShape</code></a></p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SimplexCollisionShape.html"><code>SimplexCollisionShape</code></a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Margin also distorts a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CylinderCollisionShape.html"><code>CylinderCollisionShape</code></a>,
but its effect there is more complicated.</p>
</div>
<div class="paragraph">
<p>Here are illustrations of 4 otherwise identical simplex shapes
with different margins:</p>
</div>
<table class="tableblock frame-all grid-none stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/margin1.png" alt="margin1" height="160"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/margin4.png" alt="margin4" height="160"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/margin5.png" alt="margin5" height="160"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="_images/margin6.png" alt="margin6" height="160"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Since margin is defined in physics-space units,
its effects are most noticeable for small shapes.</p>
</div>
<div class="paragraph">
<p>When using imprecise shapes, you may compensate for margin
by shrinking the shape&#8217;s dimensions (for a cone or cylinder shape)
or by moving its defining vertices inward (for a simplex or hull shape).</p>
</div>
<div class="paragraph">
<p>Another possible workaround would be to scale the physics space
so as to make the effects of margin less obvious.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_suitability_for_dynamic_bodies"><a class="anchor" href="#_suitability_for_dynamic_bodies"></a>Suitability for dynamic bodies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Not all collision shapes are suitable for dynamic rigid bodies.</p>
</div>
<div class="paragraph">
<p>For instance,
collision detection is unreliable between zero-thickness shapes such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/Box2dShape.html"><code>Box2dShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/Convex2dShape.html"><code>Convex2dShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HeightfieldCollisionShape.html"><code>HeightfieldCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HullCollisionShape.html"><code>HullCollisionShape</code></a>
with 1-to-3 vertices,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/PlaneCollisionShape.html"><code>PlaneCollisionShape</code></a>, and</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SimplexCollisionShape.html"><code>SimplexCollisionShape</code></a>
with 1-to-3 vertices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, the following shape classes are suitable <strong>only</strong>
for kinematic or static objects because
the simulator cannot determine their mass distributions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/EmptyShape.html"><code>EmptyShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HeightfieldCollisionShape.html"><code>HeightfieldCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MeshCollisionShape.html"><code>MeshCollisionShape</code></a>, and</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/PlaneCollisionShape.html"><code>PlaneCollisionShape</code></a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The safest shapes for dynamic rigid bodies are the 5 <em>primitives</em> listed below.
All have at least one <a href="https://en.wikipedia.org/wiki/Rotational_symmetry">axis of symmetry</a>,
and their centers and axes are well-known:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/BoxCollisionShape.html"><code>BoxCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CapsuleCollisionShape.html"><code>CapsuleCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/ConeCollisionShape.html"><code>ConeCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CylinderCollisionShape.html"><code>CylinderCollisionShape</code></a>, and</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SphereCollisionShape.html"><code>SphereCollisionShape</code></a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Many asymmetric shapes are also suitable for dynamic rigid bodies.
With such shapes, however, care should be taken to ensure the plausibility of
the center of mass and principal axes.
At the very least,
the shape&#8217;s center should be located well inside its convex hull.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/Minie/blob/master/TutorialApps/src/main/java/jme3utilities/tutorial/HelloMadMallet.java">HelloMadMallet</a> is a simple application
that demonstrates the effect of an implausibly centered shape.
Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A dynamic rigid body, shaped like a mallet,
falls under the influence of gravity.</p>
</li>
<li>
<p>Unlike a real mallet, the body&#8217;s center of mass (visualized by 3 arrows)
is located at the end of its handle.</p>
</li>
<li>
<p>After landing, the mallet tends to stand erect.
Although this orientation seems unnatural, it is the precisely the one
that minimizes the mallet&#8217;s
<a href="https://en.wikipedia.org/wiki/Gravitational_potential">gravitational potential</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following classes
can be used to generate asymmetric shapes for rigid bodies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/GImpactCollisionShape.html"><code>GImpactCollisionShape</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HullCollisionShape.html"><code>HullCollisionShape</code></a>
with 4 or more vertices,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MultiSphere.html"><code>MultiSphere</code></a>,</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SimplexCollisionShape.html"><code>SimplexCollisionShape</code></a>
with 4 vertices, and</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CompoundCollisionShape.html"><code>CompoundCollisionShape</code></a>
with suitable children.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the case of a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CompoundCollisionShape.html"><code>CompoundCollisionShape</code></a>,
the <code>principalAxes()</code> and <code>correctAxes()</code> methods
may be used to adjust its center and axes for a specific mass distribution.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/Minie/blob/master/TutorialApps/src/main/java/jme3utilities/tutorial/HelloMassDistribution.java">HelloMassDistribution</a>
is a simple application
that demonstrates the use of <code>principalAxes()</code> and <code>correctAxes()</code>.
Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This time, the mallet&#8217;s center of mass (visualized by 3 arrows)
lies much closer to the head, in a very plausible location.</p>
</li>
<li>
<p>After landing, the mallet comes to rest on its side,
which is a natural orientation for a mallet.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>principalAxes()</code> method relies on each child having an accurate
center, axes, and moment of inertia.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scaling"><a class="anchor" href="#_scaling"></a>Scaling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some applications require collision shapes that are <em>scalable</em>
(can be dynamically shrunk or enlarged).
However, not all collision shapes can scale arbitrarily.
In particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SimplexCollisionShape.html"><code>SimplexCollisionShape</code></a>
doesn&#8217;t support scaling;
the only allowed scale is (1,1,1).</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CapsuleCollisionShape.html"><code>CapsuleCollisionShape</code></a>,
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/ConeCollisionShape.html"><code>ConeCollisionShape</code></a>, and
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/SphereCollisionShape.html"><code>SphereCollisionShape</code></a>
support only uniform scaling, where all axes have the same scale factor,
such as (0.2, 0.2, 0.2) or (9,9,9).</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/CylinderCollisionShape.html"><code>CylinderCollisionShape</code></a>
allows the height and base to scale independently,
but the scale factors of both base axes must be equal.
In other words, the cross section must remain circular.
So (9,9,9) would be allowed for any cylinder,
but (9,1,1) would be allowed only for cylinders
where the local X axis is the height axis.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can test at runtime whether a particular scaling
is applicable to particular shape:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">if (shape.canScale(newScale)) {
    shape.setScale(newScale);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_choosing_a_shape"><a class="anchor" href="#_choosing_a_shape"></a>Choosing a shape</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For efficient simulation, the general rule is:
"Use the simplest shape that yields the desired <strong>behavior</strong>."
Focusing on behavior (rather than appearance)
helps you avoid simulating details that don&#8217;t matter.
For instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A character&#8217;s hair should probably be omitted from their collision shape.</p>
</li>
<li>
<p>Any small object that only encounters large, flat surfaces
can probably be approximated by a convex hull.</p>
</li>
<li>
<p>As long as a container remains sealed,
its collision shape need not be hollow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because most 3-D models are composed of triangle meshes,
beginners are often tempted to use mesh-based shapes
(such as <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/GImpactCollisionShape.html"><code>GImpactCollisionShape</code></a>)
for everything.
However, since mesh-based collision detection is CPU-intensive,
simpler shapes are often a better choice,
even when they don&#8217;t closely match the model&#8217;s shape.
In particular, capsule shapes are often used for humanoid models.</p>
</div>
<div class="paragraph">
<p>The following pseudo-code algorithm may be helpful:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if (the object doesn't move and isn't involved in collisions) {
    use an EmptyShape or don't add the object to the space
} else if (the object doesn't move
           and its shape can be approximated by an infinite plane) {
    use a PlaneCollisionShape
} else if (the object doesn't move
          and its shape can be approximated by point, line segment, or triangle) {
    use a SimplexCollisionShape
} else if (the object doesn't move
           and its shape can be approximated by rectangle) {
    use a Box2dShape
} else if (the object doesn't move
           and its shape can be approximated by 2-D convex polygon) {
    use a Convex2dShape
} else if (its shape can be approximated by a tetrahedron) {
    use a SimplexCollisionShape
} else if (its shape can be approximated by a centered sphere) {
    use a SphereCollisionShape
} else if (its shape can be approximated by a centered rectangular solid) {
    use a BoxCollisionShape
} else if (its shape can be approximated by a centered capsule) {
    use a CapsuleCollisionShape
} else if (its shape can be approximated by a centered cylinder) {
    use a CylinderCollisionShape
} else if (its shape can be approximated by a centered cone) {
    use a ConeCollisionShape
} else if (its shape can be approximated by an ellipsoid
           or an eccentric sphere
           or an eccentric capsule
           or the convex hull of multiple spheres) {
    use a MultiSphere
} else if (its shape can be approximated by an eccentric primitive
           or a combination of convex primitives) {
    use a CompoundCollisionShape
} else if (the object does not move) {
    if (it is a heightfield) {
        use a HeightfieldCollisionShape
    } else {
        use a MeshCollisionShape
    }
} else { // if the object moves
    if (its shape can be approximated by a convex hull) {
        use a HullCollisionShape
    } else if (its shape can be decomposed into convex hulls) {
        use a compound of hull shapes
    } else {
        use a GImpactCollisionShape
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>(Pseudocode adapted from the flowchart on page 13 of
<a href="https://github.com/bulletphysics/bullet3/blob/master/docs/Bullet_User_Manual.pdf">the Bullet User Manual</a>.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/GImpactCollisionShape.html"><code>GImpactCollisionShape</code></a>
should be your last resort!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automated_shape_generation"><a class="anchor" href="#_automated_shape_generation"></a>Automated shape generation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/util/CollisionShapeFactory.html"><code>CollisionShapeFactory</code></a> class
automates the creation of collision shapes for models.</p>
</div>
<div class="paragraph">
<p>By convention, all factory methods skip over geometries
that have the "JmePhysicsIgnore" user-data key set to <code>true</code>.</p>
</div>
<div class="sect2">
<h3 id="_for_static_bodies"><a class="anchor" href="#_for_static_bodies"></a>For static bodies</h3>
<div class="paragraph">
<p>The <code>createMeshShape()</code> method
creates a collision shape suitable for a static rigid body.
It constructs a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/HeightfieldCollisionShape.html"><code>HeightfieldCollisionShape</code></a>
for each <code>TerrainQuad</code> and <code>TerrainPatch</code> in the model.
It constructs a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MeshCollisionShape.html"><code>MeshCollisionShape</code></a>
for each non-terrain geometry in the model.
And if the model&#8217;s root spatial is a node,
it combines all the heightfields and mesh shapes into a single compound shape.</p>
</div>
<div class="paragraph">
<p>The <code>createMergedMeshShape()</code> method
creates a simple <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/MeshCollisionShape.html"><code>MeshCollisionShape</code></a>
suitable for a static rigid body.
Unlike <code>createMeshShape()</code>, it ignores terrain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_for_dynamic_bodies"><a class="anchor" href="#_for_dynamic_bodies"></a>For dynamic bodies</h3>
<div class="paragraph">
<p>Faced with the task of simulating a non-convex rigid body
(such as a cross or ring),
it&#8217;s best to decompose it into convex shapes that,
when recombined, will approximate the desired behavior.</p>
</div>
<div class="paragraph">
<p>There are various approaches,
depending how much the developer knows about the object&#8217;s shape.
If the model&#8217;s mesh is generated procedurally, it may be possible
to decompose it during the generation process.
Or if the object is modeled in Blender,
it may be practical to manually decompose it there
into meshes that are convex or nearly so.
In both cases, the desired compound shape can then be generated using
<code>createDynamicMeshShape()</code>.</p>
</div>
<div class="sect3">
<h4 id="_meshes_already_decomposed"><a class="anchor" href="#_meshes_already_decomposed"></a>Meshes already decomposed</h4>
<div class="paragraph">
<p>The <code>createDynamicMeshShape()</code> method
creates a collision shape suitable for a dynamic rigid body.
It constructs a hull shape for each geometry,
and if the model&#8217;s root spatial is a node,
it combines all the hulls into a single compound shape.</p>
</div>
<div class="paragraph">
<p>This approach comes with 3 caveats:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For good fidelity, each mesh in the model must be convex or nearly so.</p>
</li>
<li>
<p>The center of the resulting collision shape is at the model&#8217;s origin,
which might not be a plausible location for it.</p>
</li>
<li>
<p>It&#8217;s often possible to generate a more efficient shape by hand.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_automated_decomposition"><a class="anchor" href="#_automated_decomposition"></a>Automated decomposition</h4>
<div class="paragraph">
<p>For situations where manual decomposition is impractical,
Minie incorporates Khaled Mamou&#8217;s
<a href="https://github.com/kmammou/v-hacd">Volumetric-Hierarchical Approximate Convex Decomposition (V-HACD) algorithm</a>.
V-HACD makes it easy to decompose a 3-D model into a
compound of hull shapes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">VHACDParameters parms = new VHACDParameters();
CollisionShape shape
        = CollisionShapeFactory.createVhacdShape(modelRoot, parms, null);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The V-HACD algorithm is costly to run, but for many applications it can
be run in advance and the output stored in J3O format until needed.
During simulation, the resulting shape will usually be much far efficient
than a GImpact shape.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Minie provides 17 types of collision shapes,
ranging from the trivial <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/EmptyShape.html"><code>EmptyShape</code></a>
to the costly <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/collision/shapes/GImpactCollisionShape.html"><code>GImpactCollisionShape</code></a>.</p>
</li>
<li>
<p>Collision-shape instances classified as "concave"
may still exhibit the convex property.</p>
</li>
<li>
<p>Most collision shapes incorporate a margin.</p>
</li>
<li>
<p>Margin distorts the effective shape of imprecise collision shapes.</p>
</li>
<li>
<p>Most collision shapes can be scaled, but not all can be scaled non-uniformly.</p>
</li>
<li>
<p>Not all collision shapes are suitable for dynamic rigid bodies.</p>
</li>
<li>
<p>Before applying an asymmetric shape to a dynamic rigid body,
make sure its center and principal axes are plausible.</p>
</li>
<li>
<p>Use the simplest shape that yields the desired behavior.</p>
</li>
<li>
<p>To speed up simulation of objects with non-convex shapes,
decompose them into convex ones,
either during model construction or using V-HACD.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="rigidbody.html">Rigid bodies</a></span>
  <span class="next"><a href="rbc.html">RigidBodyControl</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2023 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
