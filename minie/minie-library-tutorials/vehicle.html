<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An introduction to vehicle physics :: The Minie project</title>
    <link rel="canonical" href="https://stephengold.github.io/Minie/minie/minie-library-tutorials/vehicle.html">
    <link rel="prev" href="character.html">
    <link rel="next" href="new6dof.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="An introduction to vehicle physics">
<meta property="og:title" content="The Minie project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/Minie">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Minie project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="minie" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rbc.html">RigidBodyControl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="new6dof.html">New6Dof constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dac.html">Ragdolls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="collision.html">Managing collisions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="server.html">Physics without appstates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc.html">Miscellany</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depends.html">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/Minie">Git repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/Minie/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/MinieLibrary/release-notes.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues/new">Report an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library APIs (javadoc)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/master">Master branch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-4">Version 7.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-2">Version 7.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-1">Version 7.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-0">Version 7.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-2">Version 6.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-1">Version 6.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-0">Version 6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-1">Version 5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-0">Version 5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-9">Version 4.9</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-8">Version 4.8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-7">Version 4.7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-6">Version 4.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-5">Version 4.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-4">Version 4.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-3">Version 4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-2">Version 4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-1">Version 4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-0">Version 4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-1">Version 3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-0">Version 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v2-0">Version 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Minie at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://hub.jmonkeyengine.org/c/user-code-projects/minie/63">JMonkeyEngine forum</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold/Minie">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://central.sonatype.com/search?q=Minie&amp;namespace=com.github.stephengold">Maven Central search</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://library.jmonkeyengine.org/#!entry=11511%2F38308161-c3cf-4e23-8754-528ca8387c11">JMonkeyEngine Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://store.jmonkeyengine.org/38308161-c3cf-4e23-8754-528ca8387c11">JmonkeyStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/Minie">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Minie</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://www.indiedb.com/games/the-afflicted-forests">The Afflicted Forests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/rvandoosselaer/Blocks">Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Garrett">Garrett</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://store.steampowered.com/app/2244540/Marvelous_Marbles">Marvelous Marbles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jme-vehicles">More Advanced Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://myworldvw.com">MyWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/tlf30/PhysicsSync">PhysicsSync</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://scenemax3d.com">SceneMax3D</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Acorus">Acorus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://pybullet.org/wordpress">Bullet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Heart">Heart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jmonkeyengine.org">JMonkeyEngine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Libbulletjme">Libbulletjme</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/Simsilica/SimMath">SimMath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Minie project</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Minie project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../overview.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../overview.html">The Minie project</a></li>
    <li>Library tutorials</li>
    <li><a href="vehicle.html">Vehicles</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/Minie/edit/master/MinieLibrary/src/site/antora/tutorials/modules/minie-library-tutorials/pages/vehicle.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">An introduction to vehicle physics</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A <em>physics vehicle</em> is a collision object
used to simulate a vehicle driving on (or gliding over) a smooth surface.</p>
</div>
<div class="paragraph">
<p>Bullet&#8217;s physics vehicle makes many simplifying assumptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A rigid <em>chassis</em>, supported by <em>wheels</em>.</p>
</li>
<li>
<p>Acceleration, steering, and braking forces are applied to the chassis,
not the wheels.</p>
</li>
<li>
<p>The wheels have no momentum, and as long as they touch the ground,
they don&#8217;t lose traction or "drift".
Tire friction is calculated using a basic anisotropic friction model.</p>
</li>
<li>
<p>Engine power is unlimited. There is no transmission and no gearing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The chassis is simulated by a dynamic rigid body, with all the features thereof.
During each simulation step, the vehicle controller casts physics rays
to calculate the height of each wheel&#8217;s axis above the ground.
Those heights are used to calculate the forces
exerted on the chassis by the suspension.</p>
</div>
<div class="paragraph">
<p>Instead of applying forces or directly updating the vehicle&#8217;s velocities,
an app using a physics vehicle
should specify when and how the vehicle accelerates, steers, and brakes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_direct_creation"><a class="anchor" href="#_direct_creation"></a>Direct creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a vehicle without wheels by directly invoking the
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/objects/PhysicsVehicle.html"><code>PhysicsVehicle</code></a> constructor.
This allows you to specify the shape and mass of the chassis.
Before adding it to a physics space, you should add wheels to it.
For stability, a vehicle needs at least 3 wheels, and the chassis center of mass
should be located between the wheels, roughly speaking.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stephengold/Minie/blob/master/TutorialApps/src/main/java/jme3utilities/tutorial/HelloVehicle.java">HelloVehicle</a> is a simple application
that demonstrates the direct creation of a vehicle,
followed by automated steering and acceleration.
Things to notice while running the app:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The vehicle has a wedge-shaped chassis.</p>
</li>
<li>
<p>The vehicle has 4 wheels, arranged in a rectangle.</p>
</li>
<li>
<p>The vehicle circles to the left,
accelerating steadily until it "wipes out" and flips over.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vehiclecontrol"><a class="anchor" href="#_vehiclecontrol"></a>VehicleControl</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To associate a vehicle with a <code>Spatial</code>, there&#8217;s
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/control/VehicleControl.html"><code>VehicleControl</code></a>,
a physics control that extends
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/objects/PhysicsVehicle.html"><code>PhysicsVehicle</code></a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As with <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/control/RigidBodyControl.html"><code>RigidBodyControl</code></a>,
the physics control and the collision object are the same object.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_related_demo_apps"><a class="anchor" href="#_related_demo_apps"></a>Related demo apps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jme3Examples subproject contains 4 demo apps that showcase physics vehicles:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/stephengold/Minie/blob/master/Jme3Examples/src/main/java/jme3test/bullet/TestPhysicsCar.java">The <code>TestPhysicsCar</code> app</a>
demonstrates a <code>VehicleControl</code> with keyboard-controlled motion
and debug visualization.</p>
</li>
<li>
<p><a href="https://github.com/stephengold/Minie/blob/master/Jme3Examples/src/main/java/jme3test/bullet/TestFancyCar.java">The <code>TestFancyCar</code> app</a>
demonstrates a <code>VehicleControl</code> with keyboard-controlled motion.
A textured model is used to visualize the chassis and wheels.</p>
</li>
<li>
<p><a href="https://github.com/stephengold/Minie/blob/master/Jme3Examples/src/main/java/jme3test/bullet/TestAttachDriver.java">The <code>TestAttachDriver</code> app</a>
demonstrates attaching a rigid body to vehicle by means of a physics joint.
This demo uses <code>VehicleControl</code> and debug visualization.</p>
</li>
<li>
<p><a href="https://github.com/stephengold/Minie/blob/master/Jme3Examples/src/main/java/jme3test/bullet/TestHoveringTank.java">The <code>TestHoveringTank</code> app</a>
simulates a hovercraft traveling over rough terrain.
In this demo, the "wheels" are invisible, and braking is disabled.
This demo uses the <code>PhysicsHoverControl</code> custom vehicle control.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first 3 demo apps share the following keyboard controls:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>U</kbd> to accelerate the vehicle,</p>
</li>
<li>
<p><kbd>H</kbd>/<kbd>K</kbd> to steer left/right,</p>
</li>
<li>
<p><kbd>J</kbd> to apply the brake, and</p>
</li>
<li>
<p><kbd>W</kbd>/<kbd>A</kbd>/<kbd>S</kbd>/<kbd>D</kbd> to dolly the camera forward/left/back/right.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>TestHoveringTank</code> uses a different set of keyboard controls:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>W</kbd> to accelerate the vehicle,</p>
</li>
<li>
<p><kbd>A</kbd>/<kbd>D</kbd> to rotate the vehicle left/right,</p>
</li>
<li>
<p><kbd>S</kbd> to apply the brake, and</p>
</li>
<li>
<p><kbd>Space bar</kbd> to fire the gun.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most of the remaining keyboard controls are standardized:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>Return</kbd> restarts the simulation,</p>
</li>
<li>
<p><kbd>F5</kbd> toggles visibility of the render-statistics overlay,</p>
</li>
<li>
<p><kbd>C</kbd> dumps the camera&#8217;s position to the console,</p>
</li>
<li>
<p><kbd>M</kbd> prints memory statistics to the console, and</p>
</li>
<li>
<p><kbd>Esc</kbd> ends the application.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_and_tuning"><a class="anchor" href="#_configuration_and_tuning"></a>Configuration and tuning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bullet&#8217;s vehicle model includes many details that
can affect stability and/or realism.
The complexity of the model
is often an obstacle to achieving the desired behavior.
Kester Maddock has published
<a href="https://docs.google.com/document/d/18edpOwtGgCwNyvakS78jxMajCuezotCU_0iezcwiFQc">a 16-page document on this subject</a>.</p>
</div>
<div class="sect2">
<h3 id="_chassis_shape"><a class="anchor" href="#_chassis_shape"></a>Chassis shape</h3>
<div class="paragraph">
<p>Because the chassis is a dynamic rigid body,
it requires a suitable collision shape.
In particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it should be 3-dimensional, and</p>
</li>
<li>
<p>its center and local axes should be plausible.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A symmetrical collision shape
will place the center of gravity rather high,
resulting in a vehicle prone to tipping.
To avoid this pitfall,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use an asymmetrical shape such as a <code>HullCollisionShape</code> or compound shape and</p>
</li>
<li>
<p>make sure its center is low.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, the local axes of the chassis are assigned as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>+X points left,</p>
</li>
<li>
<p>+Y points up, and</p>
</li>
<li>
<p>+Z points forward.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, the local-axis assignments can be customized to match any 3-D model.
For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">vehicle.setPhysicsSpace(physicsSpace);
VehicleController controller = vehicle.getController();
Vector3f right = new Vector3f(0f, -1f, 0f);
Vector3f up = new Vector3f(0f, 0f, -1f);
Vector3f forward = new Vector3f(-1f, 0f, 0f);
controller.setCoordinateSystem(right, up, forward);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maximum_suspension_force"><a class="anchor" href="#_maximum_suspension_force"></a>Maximum suspension force</h3>
<div class="paragraph">
<p>A vehicle&#8217;s <em>suspension</em> connects its wheels to its chassis
and supports the weight of the chassis.
If the maximum suspension force is set too low, the suspension will collapse,
causing the chassis to scrape the ground.</p>
</div>
<div class="paragraph">
<p>The default maximum suspension force is 6000 per wheel.
For a vehicle with 4 wheels and a mass of 3000,
the default is inadequate for a gravitational acceleration of 8 or more.
If the weight of the chassis is distributed unevenly among the wheels,
some of the maxima might need to be increased accordingly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_suspension_rest_length"><a class="anchor" href="#_suspension_rest_length"></a>Suspension rest length</h3>
<div class="paragraph">
<p><em>Rest length</em> is the length of a spring when no force is applied to it.
If the suspension&#8217;s rest lengths are too large,
the chassis will seem to be jacked up on stilts
and the vehicle will be prone to tipping, even when not moving.</p>
</div>
</div>
<div class="sect2">
<h3 id="_suspension_stiffness"><a class="anchor" href="#_suspension_stiffness"></a>Suspension stiffness</h3>
<div class="paragraph">
<p><em>Stiffness</em> is the force exerted by a spring divided by its change in length.
If the suspension is too stiff,
a small bump could cause the vehicle to bounce violently.
If it isn&#8217;t stiff enough, a large bump could cause the chassis to "bottom out".</p>
</div>
</div>
<div class="sect2">
<h3 id="_suspension_damping"><a class="anchor" href="#_suspension_damping"></a>Suspension damping</h3>
<div class="paragraph">
<p>Each wheel has 2 suspension damping parameters,
one for expansion and one for compression.
The range of plausible values depends on the suspension stiffness,
according to the formula in the javadoc:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">damping = 2f * k * FastMath.sqrt(stiffness);</code></pre>
</div>
</div>
<div class="paragraph">
<p>where k is the suspension&#8217;s <em>damping ratio</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>k = 0: undamped and bouncy.</p>
</li>
<li>
<p>k = 1: critically damped.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Good values of k are between 0.1 and 0.3.</p>
</div>
<div class="paragraph">
<p>The default damping parameters of 0.83 and 0.88 are suitable for a
chassis with the default stiffness of 5.88 (k=0.171 and 0.181, respectively).
If you override the default stiffness,
you should override the damping parameters as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_friction_slip"><a class="anchor" href="#_friction_slip"></a>Friction slip</h3>
<div class="paragraph">
<p>The <em>friction slip</em> parameter quantifies how much traction a tire has.
Its effect is most noticeable when the vehicle is braking.</p>
</div>
<div class="paragraph">
<p>Too much traction could cause a vehicle to flip over if it braked hard.
Too little traction would make braking ineffective,
as if the tires were bald or the supporting surface were icy.</p>
</div>
<div class="paragraph">
<p>The default value for friction slip is 10.5 .
The <code>PhysicsHoverControl</code> custom control used in <code>TestHoveringTank</code> sets the
friction slip to 0.001, making its brakes useless.</p>
</div>
</div>
<div class="sect2">
<h3 id="_roll_influence"><a class="anchor" href="#_roll_influence"></a>Roll influence</h3>
<div class="paragraph">
<p>The <em>roll-influence factor</em> reduces (or magnifies) torques
that tend to cause vehicles to roll over.</p>
</div>
<div class="paragraph">
<p>The default value of 1.0 yields realistic behavior.
Reducing this parameter will improve stability, but it&#8217;s a bit of a hack;
use it only as a last resort.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_vehicles"><a class="anchor" href="#_advanced_vehicles"></a>Advanced vehicles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For further inspiration, look at
<a href="https://github.com/stephengold/jme-vehicles">the More Advanced Vehicles demo</a>
which includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a Pacejka model for tire friction,</p>
</li>
<li>
<p>multiple gears including reverse,</p>
</li>
<li>
<p>sound effects,</p>
</li>
<li>
<p>a speedometer display,</p>
</li>
<li>
<p>a tachometer display,</p>
</li>
<li>
<p>tire smoke, and</p>
</li>
<li>
<p>skid marks.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A physics vehicle simulates a vehicle accelerating, steering, and braking
on a smooth surface.</p>
</li>
<li>
<p>To associate a vehicle with a spatial, use a <code>VehicleControl</code>.</p>
</li>
<li>
<p>The vehicle model is simplified,
yet its complexity can be an obstacle to achieving the desired behavior.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="character.html">Characters</a></span>
  <span class="next"><a href="new6dof.html">New6Dof constraints</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2023 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
