<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An introduction to DynamicAnimControl :: The Minie project</title>
    <link rel="canonical" href="https://stephengold.github.io/Minie/minie/minie-library-tutorials/dac.html">
    <link rel="prev" href="new6dof.html">
    <link rel="next" href="collision.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="An introduction to <code>DynamicAnimControl</code>">
<meta property="og:title" content="The Minie project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/Minie">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Minie project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="minie" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rbc.html">RigidBodyControl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="new6dof.html">New6Dof constraints</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="dac.html">Ragdolls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="collision.html">Managing collisions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="server.html">Physics without appstates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc.html">Miscellany</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depends.html">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/Minie">Git repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/Minie/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/MinieLibrary/release-notes.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues/new">Report an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library APIs (javadoc)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/master">Master branch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-6">Version 7.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-5">Version 7.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-4">Version 7.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-2">Version 7.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-1">Version 7.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v7-0">Version 7.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-2">Version 6.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-1">Version 6.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v6-0">Version 6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-1">Version 5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v5-0">Version 5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-9">Version 4.9</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-8">Version 4.8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-7">Version 4.7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-6">Version 4.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-5">Version 4.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-4">Version 4.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-3">Version 4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-2">Version 4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-1">Version 4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-0">Version 4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-1">Version 3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-0">Version 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v2-0">Version 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Minie at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://hub.jmonkeyengine.org/c/user-code-projects/minie/63">JMonkeyEngine forum</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold/Minie">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://library.jmonkeyengine.org/#!entry=11511%2F38308161-c3cf-4e23-8754-528ca8387c11">JMonkeyEngine Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/Minie">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Minie</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://www.indiedb.com/games/the-afflicted-forests">The Afflicted Forests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/rvandoosselaer/Blocks">Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://play.google.com/store/apps/details?id=com.tharg.boxer">Boxer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Garrett">Garrett</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://store.steampowered.com/app/2244540/Marvelous_Marbles">Marvelous Marbles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Maud">Maud editor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jme-vehicles">More Advanced Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://myworldvw.com">MyWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/tlf30/PhysicsSync">PhysicsSync</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://scenemax3d.com">SceneMax3D</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Acorus">Acorus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://pybullet.org/wordpress">Bullet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Heart">Heart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jmonkeyengine.org">JMonkeyEngine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Libbulletjme">Libbulletjme</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/Simsilica/SimMath">SimMath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Minie project</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Minie project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../overview.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../overview.html">The Minie project</a></li>
    <li>Library tutorials</li>
    <li><a href="dac.html">Ragdolls</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/Minie/edit/master/MinieLibrary/src/site/antora/tutorials/modules/minie-library-tutorials/pages/dac.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">An introduction to <code>DynamicAnimControl</code></h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The centerpiece of Minie is <code>DynamicAnimControl</code>, a kind of <code>PhysicsControl</code>.
Adding a <code>DynamicAnimControl</code> to an animated model
provides ragdoll physics and inverse kinematics.
<code>DynamicAnimControl</code> can also be used to simulate ropes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_the_control_to_a_spatial"><a class="anchor" href="#_adding_the_control_to_a_spatial"></a>Adding the control to a spatial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration of <code>DynamicAnimControl</code> mostly takes place
before the control is added to a model spatial.
Adding the control to a spatial automatically creates a ragdoll,
including rigid bodies and physics joints.
No ragdoll exists before the control is added to a spatial,
and removing a control from its spatial destroys the ragdoll.</p>
</div>
<div class="paragraph">
<p>The controlled spatial must include the model&#8217;s <code>SkinningControl</code>
(or its <code>SkeletonControl</code>, if using the old animation system).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Often this is the model&#8217;s root spatial, but not always.
If unsure about a model&#8217;s structure, use <code>MySpatial.listAnimationSpatials()</code>.
For a very simple example, see
<a href="https://github.com/stephengold/Minie/blob/master/TutorialApps/src/main/java/jme3utilities/tutorial/HelloDac.java">HelloDac.java</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>DynamicAnimControl</code> positions itself just before the <code>SkinningControl</code>
(or the <code>SkeletonControl</code>) in the spatial&#8217;s list of scene-graph controls.
There it can read the armature&#8217;s joint transforms (skeleton&#8217;s bone transforms)
<strong>after</strong> they&#8217;ve been written by canned animations
and store new values <strong>before</strong> the transforms get applied to any meshes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Minie documentation,
the word <em>skeleton</em> refers to both <code>com.jme3.animation.Skeleton</code> instances
and <code>com.jme3.anim.Armature</code> instances.
Similarly, the word <em>bone</em> refers to both <code>com.jme3.animation.Bone</code> instances
and <code>com.jme3.anim.Joint</code> instances.</p>
</div>
<div class="paragraph">
<p>In contexts where "joint" might be ambiguous,
the phrases <em>physics joint</em> (for <code>com.jme3.bullet.joints.PhysicsJoint</code>)
and <em>skeleton joint</em> (for <code>com.jme3.anim.Joint</code>) are used.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_physics_links"><a class="anchor" href="#_physics_links"></a>Physics links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A model&#8217;s ragdoll is composed of rigid bodies joined by physics joints.
Within <code>DynamicAnimControl</code>, each <code>PhysicsRigidBody</code> is represented by
a <code>PhysicsLink</code>, and the links are organized in a tree hierarchy.</p>
</div>
<div class="paragraph">
<p><code>PhysicsLink</code> has 3 subclasses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BoneLink</code>: manages one or more bones in the model’s skeleton.
Each <code>BoneLink</code> has a parent link, to which it is jointed.
Its parent may be another <code>BoneLink</code> or it may be a <code>TorsoLink</code>.</p>
</li>
<li>
<p><code>TorsoLink</code>: is always the root of a link hierarchy,
so it has no parent link.
It manages all root bones in the model&#8217;s skeleton.  It also manages any
skeleton bones that aren&#8217;t managed by a <code>BoneLink</code>.</p>
</li>
<li>
<p><code>AttachmentLink</code>: manages a non-animated model that&#8217;s
attached to the main model by means of an attachment node.
An <code>AttachmentLink</code> cannot be the parent of a link.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_a_ragdoll"><a class="anchor" href="#_configuring_a_ragdoll"></a>Configuring a ragdoll</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default constructor for <code>DynamicAnimControl</code> is configured to create a
ragdoll with no bone links, only a <code>TorsoLink</code>.
Before adding the control to a spatial, specify which bones
should be linked, by invoking the <code>link()</code> method for each of those bones.
The order in which bones are linked doesn&#8217;t matter.</p>
</div>
<div class="paragraph">
<p>I recommend starting with a default <code>LinkConfig</code> and a generous range of motion
for each linked bone:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">dynamicAnimControl.link(boneName, new LinkConfig(), new RangeOfMotion(1f, 1f, 1f));</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a simple example, see
<a href="https://github.com/stephengold/Minie/blob/master/TutorialApps/src/main/java/jme3utilities/tutorial/HelloBoneLink.java">HelloBoneLink</a>.</p>
</div>
<div class="paragraph">
<p>When you run <code>HelloBoneLink</code>, press the space bar to put the control into
dynamic mode.
You&#8217;ll see the linked bones go limp while the remainder of the Ninja model
stays rigid.</p>
</div>
<div class="paragraph">
<p>As an alternative to hand-coding the control configuration,
you can generate configuration code for a specific model using
<a href="https://github.com/stephengold/Minie/tree/master/DacWizard">the DacWizard application</a>,
which samples animation tracks to estimate
the range of motion for each linked bone.</p>
</div>
<div class="paragraph">
<p>You probably don&#8217;t want to link every bone in the model&#8217;s skeleton.
For instance, if the model has articulated fingers, you probably want to link
the hand bones but not the individual finger bones.
Unlinked bones will be managed by the nearest linked ancestor bone.
The <code>TorsoLink</code> will manage any bones for which no ancestor bone is linked.
If you link too many bones, the ragdoll may become inflexible or jittery
due to collisions between rigid bodies that don&#8217;t share a <code>PhysicsJoint</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_link_modes_dynamickinematic"><a class="anchor" href="#_link_modes_dynamickinematic"></a>Link modes:  dynamic/kinematic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once a <code>DynamicAnimControl</code> is added to a spatial,
the next step is to add it to a <code>PhysicsSpace</code>.
Then, on the next simulation step,
the ragdoll automatically becomes <em>"ready for dynamic mode"</em>.</p>
</div>
<div class="paragraph">
<p>Within such a ragdoll, each link can be independently configured
as <em>dynamic</em> (controlled by physics) or <em>kinematic</em> (unaffected by physics).
Initially, all links are kinematic.</p>
</div>
<div class="paragraph">
<p>Kinematic mode has 4 <em>submodes</em>.
The default submode is <code>Animated</code>, which applies bone rotations obtained
from the model&#8217;s <code>AnimComposer</code> or <code>AnimControl</code>.
This is the submode you&#8217;d use to play an <code>AnimClip</code> on the ragdoll.</p>
</div>
<div class="paragraph">
<p>The other kinematic submodes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Frozen</code>, which freezes bone rotations at their current values,</p>
</li>
<li>
<p><code>Bound</code>, which sets bone rotations
based on the bind position of the model&#8217;s skeleton, and</p>
</li>
<li>
<p><code>Amputated</code> which reduces bone scales to simulate amputated limbs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dynamic mode includes options for locking rotational axes
and applying uniform acceleration (to simulate gravity).</p>
</div>
<div class="paragraph">
<p>To make an entire ragdoll go limp, use <code>setRagdollMode()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>DynamicAnimControl</code> doesn&#8217;t actually have a "ragdoll mode".
<code>setRagdollMode()</code> is a convenience method
that puts all links into dynamic mode, applies gravity,
and releases most attachments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since each link can be independently configured,
it&#8217;s possible for a ragdoll to be part dynamic, part kinematic.
For instance, you can make an NPC flee in terror (kinematic torso and legs)
while its injured arm dangles limply (dynamic mode).</p>
</div>
<div class="paragraph">
<p>To make a subtree of a ragdoll go limp, use <code>setDynamicSubtree()</code>.
You can also configure the links individually using <code>PhysicsLink.setDynamic()</code>.</p>
</div>
<div class="paragraph">
<p>To avoid sudden jumps
when a link transitions from dynamic mode to kinematic mode,
there&#8217;s a configurable blending period.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_canned_animations_in_dynamic_mode"><a class="anchor" href="#_canned_animations_in_dynamic_mode"></a>Canned animations in dynamic mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Documentation not yet written)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collisions_between_links"><a class="anchor" href="#_collisions_between_links"></a>Collisions between links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Documentation not yet written)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inverse_kinematics"><a class="anchor" href="#_inverse_kinematics"></a>Inverse kinematics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Given a set of rigid bodies joined by rotational constraints,
the problem of finding joint angles to satisfy additional constraints
is referred to as an <em>inverse-kinematic</em> (IK) problem.
For example, you might want to ensure that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a character’s nose stays at a particular location, or</p>
</li>
<li>
<p>a character’s forearm remains horizontal, or</p>
</li>
<li>
<p>a character’s eyes gaze toward a moving vehicle, or</p>
</li>
<li>
<p>the tip of a character&#8217;s thumb touches their ear, or</p>
</li>
<li>
<p>a character’s feet stay within 5 cm of the ground plane, or</p>
</li>
<li>
<p>a character&#8217;s center of gravity stays directly above their left foot, or</p>
</li>
<li>
<p>2 characters hold hands.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the context of a <code>DynamicAnimControl</code> ragdoll, you can solve such problems
by adding joints and/or controllers to its physics links.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <em>IK joint</em> (<code>IKJoint</code>) is simply a physics constraint
that&#8217;s been augmented for use with <code>DynamicAnimControl</code>.</p>
</li>
<li>
<p>A <em>IK controller</em> (<code>IKController</code>) is a software object
that calculates forces, impulses, and torques
and applies them to a <code>PhysicsLink</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both mechanisms work only on dynamic links, not static ones.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For instance, to constrain a character’s nose to be at a particular location,
you might add a single-ended IK joint to the head&#8217;s <code>BoneLink</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An IK joint that constrains both location and orientation is called a <em>fix</em>.</p>
</li>
<li>
<p>An IK joint that constrains location but not orientation is called a <em>pin</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>(More documentation to be written)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collision_detection"><a class="anchor" href="#_collision_detection"></a>Collision detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Documentation not yet written)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact_response"><a class="anchor" href="#_contact_response"></a>Contact response</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Documentation not yet written)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simulating_chainrope"><a class="anchor" href="#_simulating_chainrope"></a>Simulating chain/rope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Documentation not yet written)</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="new6dof.html">New6Dof constraints</a></span>
  <span class="next"><a href="collision.html">Managing collisions</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2023 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
