<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to add Minie to an existing project :: The Minie project</title>
    <link rel="canonical" href="https://stephengold.github.io/Minie/minie/minie-library-tutorials/add.html">
    <link rel="prev" href="../implementation.html">
    <link rel="next" href="rigidbody.html">
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="How to add Minie to an existing project">
<meta property="og:title" content="The Minie project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/Minie">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Minie project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="minie" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rbc.html">RigidBodyControl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Debug aids</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="new6dof.html">New6Dof constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dac.html">Ragdolls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="detect.html">Collision detection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="server.html">Physics without appstates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc.html">Miscellany</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depends.html">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/Minie">Git repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/Minie/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/blob/master/MinieLibrary/release-notes.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Minie/issues/new">File an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library APIs (javadoc)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/master">Master branch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-7">Version 4.7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-6">Version 4.6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-5">Version 4.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-4">Version 4.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-3">Version 4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-2">Version 4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-1">Version 4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v4-0">Version 4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-1">Version 3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v3-0">Version 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Minie/javadoc/v2-0">Version 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Minie at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://hub.jmonkeyengine.org/c/user-code-projects/minie/63">JMonkeyEngine forum</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold/Minie">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://search.maven.org/artifact/com.github.stephengold/Minie">Maven Central search</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://store.jmonkeyengine.org/38308161-c3cf-4e23-8754-528ca8387c11">JmonkeyStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/Minie">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Minie</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://www.indiedb.com/games/the-afflicted-forests">The Afflicted Forests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/rvandoosselaer/Blocks">Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Garrett">Garrett</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jme-vehicles">More Advanced Vehicles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://myworldvw.com">MyWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/tlf30/PhysicsSync">PhysicsSync</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://scenemax3d.com">SceneMax3D</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Acorus">Acorus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://pybullet.org/wordpress">Bullet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Heart">Heart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jmonkeyengine.org">JMonkeyEngine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/Libbulletjme">Libbulletjme</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/Simsilica/SimMath">SimMath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Minie project</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Minie project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../overview.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../overview.html">The Minie project</a></li>
    <li>Library tutorials</li>
    <li><a href="add.html">Add to existing project</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/Minie/edit/master/MinieLibrary/src/site/antora/tutorials/modules/minie-library-tutorials/pages/add.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">How to add Minie to an existing project</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you&#8217;re creating a JMonkeyEngine desktop application from scratch,
<a href="https://github.com/stephengold/BasicGame-on-Gradle">the BasicGame-on-Gradle project</a>
provides a good template.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Adding Minie to an existing JMonkeyEngine project is a 7-step process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove any libraries that might interfere with Minie.</p>
</li>
<li>
<p>Add libraries to the classpath.</p>
</li>
<li>
<p>Load the native library.</p>
</li>
<li>
<p>Create, configure, and attach
a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a>,
if the application doesn&#8217;t already do so.</p>
</li>
<li>
<p>Configure the <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/PhysicsSpace.html"><code>PhysicsSpace</code></a>,
if the application doesn&#8217;t already do so.</p>
</li>
<li>
<p>Create physics controls, collision objects,
and joints and add them to the physics space,
if the application doesn&#8217;t already do so.</p>
</li>
<li>
<p>Test and tune as necessary.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remove_libraries_that_might_interfere"><a class="anchor" href="#_remove_libraries_that_might_interfere"></a>Remove libraries that might interfere</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If any directory where the application might run contains files
named "libbulletjme.so" or "bulletjme.dll" or "libbulletjme.dylib",
you should remove those files.
Those filenames are used by JMonkeyEngine when it loads the native library,
and you don&#8217;t want it to load the wrong one!</p>
</div>
<div class="paragraph">
<p>Also, Minie replaces (and is thus incompatible with) the following
JMonkeyEngine libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jme3-bullet</p>
</li>
<li>
<p>jme3-bullet-native</p>
</li>
<li>
<p>jme3-bullet-native-android, and</p>
</li>
<li>
<p>jme3-jbullet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before adding Minie, you should remove these libraries from the project so
they won&#8217;t interfere with Minie.</p>
</div>
<div class="sect2">
<h3 id="_gradle_built_projects"><a class="anchor" href="#_gradle_built_projects"></a>Gradle-built projects</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Look for artifacts with those names in the <code>dependencies</code> section(s)
of the project&#8217;s "*.gradle" file(s).</p>
</li>
<li>
<p>Remove those dependencies.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_maven_built_projects"><a class="anchor" href="#_maven_built_projects"></a>Maven-built projects</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Look for artifacts with those IDs in the <code>dependencies</code> section(s)
of the project&#8217;s "pom.xml" file.</p>
</li>
<li>
<p>Remove those dependencies.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_ant_built_projects"><a class="anchor" href="#_ant_built_projects"></a>Ant-built projects</h3>
<div class="paragraph">
<p>Open the project&#8217;s properties in the IDE (JME SDK or NetBeans):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click on the project (not its assets) in the "Projects" window.</p>
</li>
<li>
<p>Select <b class="menuref">Properties</b> to open the "Project Properties" dialog.</p>
</li>
<li>
<p>Under "Categories:", click on <b class="button">Libraries</b>.</p>
</li>
<li>
<p>Click on the <b class="button">Compile</b> tab.</p>
</li>
<li>
<p>Look for incompatible libraries in the "Compile-time Libraries"
listbox.  Select them and click on the <b class="button">Remove</b> button.</p>
</li>
<li>
<p>Click on the <b class="button">OK</b> button to exit the "Project Properties" dialog.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_libraries_to_the_classpath"><a class="anchor" href="#_add_libraries_to_the_classpath"></a>Add libraries to the classpath</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Minie comes pre-built as a single library that includes both Java classes
and native libraries.
The Minie library depends on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the standard jme3-terrain library,</p>
</li>
<li>
<p><a href="https://github.com/Simsilica/SimMath">Simsilica&#8217;s SimMath library</a>, and</p>
</li>
<li>
<p><a href="https://github.com/stephengold/Heart">the Heart library</a>,
which in turn depend on:</p>
<div class="ulist">
<ul>
<li>
<p>the standard jme3-core library.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For projects built using Gradle or Maven, it&#8217;s usually sufficient to specify the
dependency on the Minie Library.  Build tools should automatically
resolve the remaining dependencies.</p>
</div>
<div class="sect2">
<h3 id="_gradle_built_projects_2"><a class="anchor" href="#_gradle_built_projects_2"></a>Gradle-built projects</h3>
<div class="paragraph">
<p>Add to the application&#8217;s "build.gradle" file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">repositories {
    mavenCentral()
    maven { url 'https://jcenter.bintray.com' } // for SimMath
}
dependencies {
    implementation 'com.github.stephengold:Minie:4.8.1'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For some older versions of Gradle,
it&#8217;s necessary to replace <code>implementation</code> with <code>compile</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_maven_built_projects_2"><a class="anchor" href="#_maven_built_projects_2"></a>Maven-built projects</h3>
<div class="paragraph">
<p>Add to the project&#8217;s "pom.xml" file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;mvnrepository&lt;/id&gt;
      &lt;url&gt;https://repo1.maven.org/maven2/&lt;/url&gt;
    &lt;/repository&gt;
    &lt;repository&gt;
        &lt;id&gt;jcenter&lt;/id&gt;
        &lt;name&gt;jcenter&lt;/name&gt;
        &lt;url&gt;https://jcenter.bintray.com&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;

&lt;dependency&gt;
  &lt;groupId&gt;com.github.stephengold&lt;/groupId&gt;
  &lt;artifactId&gt;Minie&lt;/artifactId&gt;
  &lt;version&gt;4.8.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ant_built_projects_2"><a class="anchor" href="#_ant_built_projects_2"></a>Ant-built projects</h3>
<div class="paragraph">
<p>Download the Minie, Heart, and SimMath libraries from GitHub:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/stephengold/Minie/releases/tag/4.8.1" class="bare">https://github.com/stephengold/Minie/releases/tag/4.8.1</a></p>
</li>
<li>
<p><a href="https://github.com/stephengold/Heart/releases/tag/7.4.1" class="bare">https://github.com/stephengold/Heart/releases/tag/7.4.1</a></p>
</li>
<li>
<p><a href="https://github.com/Simsilica/SimMath/releases/tag/sim-math-v1.4.1" class="bare">https://github.com/Simsilica/SimMath/releases/tag/sim-math-v1.4.1</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You&#8217;ll want both class JARs
and probably the "-sources" and "-javadoc" JARs as well.</p>
</div>
<div class="paragraph">
<p>Open the project&#8217;s properties in the IDE (JME SDK or NetBeans):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click on the project (not its assets) in the "Projects" window.</p>
</li>
<li>
<p>Select <b class="menuref">Properties</b> to open the "Project Properties" dialog.</p>
</li>
<li>
<p>Under "Categories:", click on <b class="button">Libraries</b>.</p>
</li>
<li>
<p>Click on the <b class="button">Compile</b> tab.</p>
</li>
<li>
<p>Add the Heart class JAR:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click on the <b class="button">Add JAR/Folder</b> button.</p>
</li>
<li>
<p>Navigate to the download directory.</p>
</li>
<li>
<p>Select the "Heart-7.4.1" file.</p>
</li>
<li>
<p>Click on the <b class="button">Open</b> button.</p>
</li>
</ol>
</div>
</li>
<li>
<p>(optional) Add JARs for javadoc and sources:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click on the <b class="button">Edit</b> button.</p>
</li>
<li>
<p>Click on the <b class="button">Browse&#8230;&#8203;</b> button to the right of "Javadoc:"</p>
</li>
<li>
<p>Select the "Heart-7.4.1-javadoc.jar" file.</p>
</li>
<li>
<p>Click on the <b class="button">Open</b> button.</p>
</li>
<li>
<p>Click on the <b class="button">Browse&#8230;&#8203;</b> button to the right of "Sources:"</p>
</li>
<li>
<p>Select the "Heart-7.4.1-sources.jar" file.</p>
</li>
<li>
<p>Click on the <b class="button">Open</b> button button again.</p>
</li>
<li>
<p>Click on the <b class="button">OK</b> button to close the "Edit Jar Reference" dialog.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Similarly, add the Minie and sim-math JAR(s).</p>
</li>
<li>
<p>Click on the <b class="button">OK</b> button to exit the "Project Properties" dialog.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In order to use the latest Minie release,
you&#8217;ll need version 3.5.1 JMonkeyEngine libraries.
(You can still use a JME 3.2 or 3.3 SDK, however.)
For more information about the libraries Minie depends on,
see <a href="https://stephengold.github.io/Minie/minie/depends.html">the Library version dependencies page in the Minie documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_load_the_native_library"><a class="anchor" href="#_load_the_native_library"></a>Load the native library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a conventional JMonkeyEngine application,
the required native libraries get loaded automatically by <code>Application.start()</code>.</p>
</div>
<div class="paragraph">
<p>If your application doesn&#8217;t invoke <code>Application.start()</code>,
load Minie&#8217;s native library before instantiating any physics objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">NativeLibraryLoader.loadNativeLibrary("bulletjme", true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Minie to work on Android platforms running Marshmallow (6.0) or higher,
make sure the <code>extractNativeLibs</code> flag is set to <code>true</code>
in the "application" element of the "AndroidManifest.xml" manifest.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_attach_a_bulletappstate"><a class="anchor" href="#_attach_a_bulletappstate"></a>Attach a <code>BulletAppState</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Strictly speaking, Minie doesn&#8217;t require a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a>.
However, the appstate <strong>does</strong> provide a convenient interface
for configuring, accessing, updating, and debugging
a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/PhysicsSpace.html"><code>PhysicsSpace</code></a>.</p>
</div>
<div class="paragraph">
<p>If the application already has
a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a>, that code will probably
work fine with Minie.
If not, here is a snippet to guide you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SoftPhysicsAppState appState = new SoftPhysicsAppState();
stateManager.attach(appState);
PhysicsSoftSpace physicsSpace = appState.getPhysicsSoftSpace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the application doesn&#8217;t need soft bodies, you can instantiate
a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a> directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BulletAppState appState = new BulletAppState();
stateManager.attach(appState);
PhysicsSpace physicsSpace = appState.getPhysicsSpace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the application needs multibodies, instantiate a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/MultiBodyBulletAppState.html"><code>MultiBodyBulletAppState</code></a>.
(Minie doesn&#8217;t yet support combining soft bodies and multibodies in
a single physics space.)</p>
</div>
<div class="paragraph">
<p>By default, the physics simulation runs on the render thread.
To execute it on a dedicated thread, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, simulation advances based on the time per frame (tpf)
reported by the renderer.
To advance the physics simulation at a different rate, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">bulletAppState.setSpeed(0.5f); // simulate physics at half speed</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, debug visualization is disabled. To enable it, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">bulletAppState.setDebugEnabled(true); // default=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a> parameters,
used to customize debug visualization,
are described on <a href="debug.html" class="xref page">the debugging page</a>.</p>
</div>
<div class="paragraph">
<p>Ways to simulate physics without using
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a>
are described on <a href="server.html" class="xref page">the physics-without-appstates page</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_the_physicsspace"><a class="anchor" href="#_configure_the_physicsspace"></a>Configure the <code>PhysicsSpace</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Attaching a <a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a> instantiates a
<a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/PhysicsSpace.html"><code>PhysicsSpace</code></a> that
the application can access immediately:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PhysicsSpace space = bulletAppState.getPhysicsSpace();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>SoftPhysicsAppState</code> instantiates a <code>PhysicsSoftSpace</code>, which is a subclass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PhysicsSoftSpace space = bulletAppState.getPhysicsSoftSpace();</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>MultiBodyAppState</code> instantiates a <code>MultiBodySpace</code>, another subclass.</p>
</div>
<div class="paragraph">
<p>Physics simulation can run with a fixed time step or a variable time step.
The default configuration is a fixed time step of 1/60th of a second
with up to 4 time steps per frame.</p>
</div>
<div class="paragraph">
<p>To configure a variable time step with a maximum of 0.25 seconds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">space.setMaxSubSteps(0);
space.setMaxTimeStep(0.25f);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure a fixed time step of 0.01 second with up to 6 time steps per frame:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">space.setAccuracy(0.01f);
space.setMaxSubSteps(6);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>setAccuracy()</code> has no effect when <code>maxSubSteps==0</code>,
while <code>setMaxTimeStep()</code> has no effect when <code>maxSubSteps&gt;0</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The contact solver performs a fixed number of iterations per time step,
by default, 10.
For higher-quality (but slower) simulation, increase this number.
For instance, to use 20 iterations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">space.getSolverInfo().setNumIterations(20);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each physics space has a gravity vector,
which is typically applied to bodies as they get added to the space.
To simulate a zero-gravity environment,
set the gravity of the space to zero:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">space.setGravity(Vector3f.ZERO);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_collision_objects"><a class="anchor" href="#_create_collision_objects"></a>Create collision objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Collision objects come in several different types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>bodies (<code>PhysicsBody</code>)</p>
<div class="ulist">
<ul>
<li>
<p>soft bodies (<code>PhysicsSoftBody</code>)</p>
</li>
<li>
<p>rigid bodies (<code>PhysicsRigidBody</code>)</p>
<div class="ulist">
<ul>
<li>
<p>vehicles (<code>PhysicsVehicle</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>ghost objects (<code>PhysicsGhostObject</code>)</p>
</li>
<li>
<p>characters (<code>PhysicsCharacter</code>)</p>
</li>
<li>
<p>colliders (<code>MultiBodyCollider</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create collision objects directly, using the constructors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">float radius = 2f;
CollisionShape sphere2 = new SphereCollisionShape(radius);
PhysicsGhostObject ghost1 = new PhysicsGhostObject(sphere2);
float mass = 1f;
PhysicsRigidBody body1 = new PhysicsRigidBody(sphere2, mass);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or indirectly, by adding physics controls to scene-graph spatials:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">float radius = 2f;
CollisionShape sphere2 = new SphereCollisionShape(radius);

Node ghostNode1 = new Node("ghostNode1");
GhostControl gc1 = new GhostControl(sphere2);
ghostNode1.addControl(gc1);

Node rigidNode1 = new Node("rigidNode1");
float mass = 1f;
RigidBodyControl rbc1 = new RigidBodyControl(sphere2, mass);
rigidNode1.addControl(rbc1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Either way, the objects
aren&#8217;t simulated unless they&#8217;re added to a space.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Before adding Minie to an application, remove all other physics libraries.</p>
</li>
<li>
<p><a href="https://stephengold.github.io/Minie/javadoc/master/com/jme3/bullet/BulletAppState.html"><code>BulletAppState</code></a> provides a convenient interface
for configuring, accessing, updating, and debugging a physics space.</p>
</li>
<li>
<p>Collision objects can be created 2 ways:</p>
<div class="ulist">
<ul>
<li>
<p>directly, using the constructors</p>
</li>
<li>
<p>indirectly, by adding physics controls to the scene graph.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Collision objects aren&#8217;t simulated unless they&#8217;re added to a space.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../implementation.html">Implementation</a></span>
  <span class="next"><a href="rigidbody.html">Rigid bodies</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2022 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
